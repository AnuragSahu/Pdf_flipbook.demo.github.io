/* v 3.7.1
author http://codecanyon.net/user/creativeinteractivemedia/portfolio?ref=creativeinteractivemedia
*/

var FLIPBOOK=FLIPBOOK||{};FLIPBOOK.BookSwipe=function(i,e,t,s){this.options=s,this.singlePage=s.singlePageMode,this.pageWidth=this.options.pageWidth,this.pageHeight=this.options.pageHeight,this.slides=[],this.pagesArr=[],this.leftPage=0,this.rightPage=0,this.rotation=0,this.prevPageEnabled=!1,this.setRightIndex(s.rightToLeft?s.pages.length:0),this.currentSlide=0,this.flipping=!1,this.wrapper=e,this.$wrapper=jQuery(e),this.scroller=i,this.$scroller=jQuery(this.scroller).removeClass("book").addClass("flipbook-carousel-scroller"),this.iscroll=new IScroll(this.wrapper,{snap:!0,snapSpeed:200*this.options.pageFlipDuration,freeScroll:!0,scrollX:!0,scrollY:!1,preventDefault:!1,disableTouch:!0,eventPassthrough:"vertical"});for(var o=0;o<3;o++){var n=jQuery('<div class="flipbook-carousel-slide"><div class="slide-inner"/></div>"').appendTo(this.$scroller);this.slides.push(n)}this.slides[0].iscroll=new IScroll(this.slides[0][0],{zoom:!0,scrollX:!0,scrollY:!0,freeScroll:!0,keepInCenterV:!0,keepInCenterH:!0,preventDefault:!1}),this.slides[2].iscroll=new IScroll(this.slides[2][0],{zoom:!0,scrollX:!0,scrollY:!0,freeScroll:!0,keepInCenterV:!0,keepInCenterH:!0,preventDefault:!1}),this.slides[1].iscroll=new IScroll(this.slides[1][0],{zoom:!0,scrollX:!0,scrollY:!0,freeScroll:!0,keepInCenterV:!0,keepInCenterH:!0,preventDefault:!1});for(o=0;o<3;o++)this.slides[o].iscroll.on("zoomEnd",function(){var i=s.main.zoom;this.options.eventPassthrough=1<i?"":"vertical",this.options.freeScroll=1<i,this.refresh()});var h;this.slides[1].iscroll.on("zoomStart",function(){}),this.resizeInnerSlides();for(s.rightToLeft,s.numPages,s.pdfMode,o=0;o<s.numPages;o++)h=new FLIPBOOK.PageSwipe(t,s,o,s.pages[o].src,s.pages[o].htmlContent),this.pagesArr.push(h),s.loadAllPages&&h.load();var l=this;this.iscroll.on("scrollStart",function(){}),this.iscroll.on("scrollEnd",function(){var i=this.currentPage.pageX;l.currentSlide!=i&&(l.singlePage?i>l.currentSlide?l.setRightIndex(l.rightIndex+1):i<l.currentSlide&&l.setRightIndex(l.rightIndex-1):i>l.currentSlide?l.setRightIndex(l.rightIndex+2):i<l.currentSlide&&l.setRightIndex(l.rightIndex-2),l.currentSlide=i,l.updateVisiblePages(),l.flipping=!1)}),this.flipEnabled=!0,this.nextEnabled=!0,this.prevEnabled=!0,t.on("toolMove",function(){l.updateTool()}),t.on("toolSelect",function(){l.updateTool()}),t.on("pageLoaded",function(i){})},FLIPBOOK.BookSwipe.prototype.constructor=FLIPBOOK.BookSwipe,FLIPBOOK.BookSwipe.prototype={goToPage:function(i,e){if(this.enabled&&this.flipEnabled){if(i>this.options.pages.length&&(i=this.options.pages.length),(this.singlePage||i%2!=0)&&i--,(isNaN(i)||i<0)&&(i=0),this.resetZoom(),e)return this.setRightIndex(i),void this.updateVisiblePages();this.singlePage?(this.options.rightToLeft&&this.options.oddPages&&i<1&&(i=1),i>this.rightIndex?(this.setSlidePages(this.currentSlide+1,[i]),this.setRightIndex(i-1),this.nextPage(e)):i<this.rightIndex&&(this.setSlidePages(this.currentSlide-1,[i]),this.setRightIndex(i+1),this.prevPage(e))):(this.options.rightToLeft&&this.options.oddPages&&i<2&&(i=2),i>this.rightIndex?i>=this.pagesArr.length?(this.setSlidePages(2,[i-1,i]),this.setRightIndex(i-2),this.goToSlide(2,e)):(this.setSlidePages(this.currentSlide+1,[i-1,i]),this.setRightIndex(i-2),this.nextPage(e)):i<this.rightIndex&&(0==i?(this.setRightIndex(i+2),this.setSlidePages(0,[i]),this.goToSlide(0,e)):(this.setRightIndex(i+2),this.setSlidePages(this.currentSlide-1,[i-1,i]),this.prevPage(e))))}},setRightIndex:function(i){this.rightIndex=i},nextPage:function(i){2!=this.currentSlide&&(this.flipping=!0,this.goToSlide(this.currentSlide+1,i))},prevPage:function(i){0!=this.currentSlide&&(this.flipping=!0,this.goToSlide(this.currentSlide-1,i))},enablePrev:function(i){this.prevEnabled=i},enableNext:function(i){this.nextEnabled=i},resetZoom:function(){},setSlidePages:function(i,e){for(var t=[],s=0;s<e.length;s++)t.push(e[s].index);if(!this.slides[i].pages||t.join("")!==this.slides[i].pages.join("")){this.clearSlidePages(i);var o=this.slides[i].find(".slide-inner");for(s=0;s<e.length;s++){var n=e[s].index;this.pagesArr[n]&&(o.append(this.pagesArr[n].$wrapper),this.slides[i].pages.push(n))}this.resizeInnerSlides(),this.slides[i].iscroll&&this.slides[i].iscroll.refresh()}},updateTool:function(){switch(this.options.main.tool){case"toolSelect":this.disableFlip(),this.disablePan(),jQuery(".flipbook-textLayer").css("pointer-events","auto").removeClass(".flipbook-noselect");break;case"toolMove":this.onZoom(this.options.main.zoom),jQuery(".flipbook-textLayer").css("pointer-events","none").addClass(".flipbook-noselect")}},clearSlidePages:function(i){this.slides[i].find(".slide-inner").empty(),this.slides[i].pages=[]},setZoomPages:function(i){if(!this.$zoomScroller.pages||this.$zoomScroller.pages.join("")!=i.join("")){this.$zoomScroller.empty(),this.$zoomScroller.pages=[];for(var e=0;e<i.length;e++){var t=i[e];this.pagesArr[t]&&(this.$zoomScroller.append(this.pagesArr[t].$wrapper),this.$zoomScroller.pages.push(t))}}},resizeZoomPages:function(i,e){var t=this.$wrapper.height()*e,s=500*parseInt(t/500)+500;s<500&&(s=500),2e3<s&&(s=2e3);for(var o=0;o<i.length;o++){var n=i[o];this.pagesArr[n]&&this.pagesArr[n].load()}},getCurrentSlidePages:function(){return this.singlePage?[this.rightIndex]:[this.rightIndex-1,this.rightIndex]},clearSlide:function(i){this.slides[i].empty()},hasPage:function(i,e){},loadVisiblePages:function(){var i=this.options.main,e=this.rightIndex;this.options.rightToLeft&&this.options.oddPages&&e--;var t=this.pagesArr[e],s=this.pagesArr[e-1],o=this.pagesArr[e+1],n=this.pagesArr[e+2],h=this.pagesArr[e-2],l=this.pagesArr[e-3];this.singlePage?t?t.load(function(){i.setLoadingProgress(1),s&&s.load(),o&&o.load()}):s&&s.load():s?s.load(function(){t?t.load(function(){i.setLoadingProgress(1),h&&h.load(),l&&l.load(),o&&o.load(),n&&n.load()}):(i.setLoadingProgress(1),h&&h.load(),l&&l.load())}):t&&t.load(function(){i.setLoadingProgress(1),o&&o.load(),n&&n.load()})},updateVisiblePages:function(){this.options.main;var i=this.rightIndex;this.options.rightToLeft&&this.options.oddPages&&i--;var e=this.pagesArr[i],t=this.pagesArr[i-1],s=this.pagesArr[i+1],o=this.pagesArr[i+2],n=this.pagesArr[i-2],h=this.pagesArr[i-3];this.singlePage?t?s?(this.setSlidePages(1,[e]),this.setSlidePages(0,[t]),this.setSlidePages(2,[s]),this.goToSlide(1,!0)):(this.setSlidePages(2,[e]),this.setSlidePages(1,[t]),this.goToSlide(2,!0),this.clearSlidePages(0)):(this.setSlidePages(0,[e]),s?this.setSlidePages(1,[s]):this.clearSlidePages(1),this.goToSlide(0,!0),this.clearSlidePages(2)):t?e?s?n?(this.setSlidePages(1,[t,e]),h?this.setSlidePages(0,[h,n]):this.setSlidePages(0,[n]),o?this.setSlidePages(2,[s,o]):this.setSlidePages(2,[s]),this.goToSlide(1,!0)):(this.setSlidePages(0,[t,e]),o?this.setSlidePages(1,[s,o]):this.setSlidePages(1,[s]),this.clearSlidePages(2)):(this.setSlidePages(2,[t,e]),h?this.setSlidePages(1,[h,n]):this.setSlidePages(1,[n]),this.goToSlide(2,!0),this.clearSlidePages(0)):(this.setSlidePages(2,[t]),h?this.setSlidePages(1,[h,n]):this.setSlidePages(1,[n]),this.goToSlide(2,!0),this.clearSlidePages(0)):(this.setSlidePages(0,[e]),o?this.setSlidePages(1,[s,o]):this.setSlidePages(1,[s]),this.goToSlide(0,!0),this.clearSlidePages(2)),this.loadVisiblePages(),this.options.main.turnPageComplete()},loadPage:function(i){this.pagesArr[i]&&this.pagesArr[i].load()},hidePage:function(i){},showPage:function(i){},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0,this.onResize()},resize:function(){},onResize:function(){var i=this.$wrapper.width(),e=this.$wrapper.height();if(this.w=i,this.h=e,0!=i&&0!=e){var t,s=this.pageWidth,o=this.pageHeight,n=2*this.options.zoomMin*s/o>i/e,h=!this.options.singlePageMode&&(!this.options.responsiveView||i>this.options.responsiveViewTreshold||!n),l=h?2*s:s,r=o;this.bw=l,t=(this.bh=r)/l<e/i?r/l*i/this.options.pageTextureSize:e/this.options.pageTextureSize;for(var a=0;a<this.slides.length;a++)this.slides[a].width(i+0).height(e),this.slides[a].iscroll&&(this.slides[a].iscroll.options.zoomMin=this.options.zoomMin*t,this.slides[a].iscroll.options.zoomMax=this.options.zoomMax*t,this.slides[a].iscroll.refresh());this.$scroller.width(this.$scroller.children().length*(i+0)),this.iscroll.refresh(),h&&!this.options.singlePageMode||this.singlePage?h&&!this.options.singlePageMode&&this.singlePage&&(this.rightIndex%2!=0&&this.setRightIndex(this.rightIndex+1),this.singlePage=!1,this.resizeInnerSlides()):(this.rightIndex%2==0&&0<this.rightIndex&&this.setRightIndex(this.rightIndex-1),this.singlePage=!0,this.resizeInnerSlides()),this.updateVisiblePages()}},resizeInnerSlides:function(){var i=this.options.pageTextureSize*this.pageWidth/this.pageHeight;90!=this.rotation&&270!=this.rotation||(i=this.options.pageTextureSize*this.pageHeight/this.pageWidth);for(var e=this.singlePage?i:2*i,t=0;t<3;t++)e=this.slides[t].pages&&1==this.slides[t].pages.length?i:2*i,this.slides[t].find(".slide-inner").width(e)},resizeInnerSlide:function(i){var e=this.options.pageTextureSize*this.pageWidth/this.pageHeight;this.slides[i].pages.length,this.slides[i].find(".slide-inner").width(e)},goToSlide:function(i,e){var t=e?0:300*this.options.pageFlipDuration;0<this.iscroll.pages.length&&this.iscroll.goToPage(i,0,t),e&&(this.currentSlide=i),this.zoomTo(this.options.zoomMin)},getCurrentSlide:function(){return this.currentSlide},zoomIn:function(i,e,t){t&&"mousewheel"===t.type||this.zoomTo(i)},zoomTo:function(i,e,t,s){if(this.enabled){t=t||0,s=s||0,e=e||0;if(1<i&&this.disableFlip(),0!=n&&0!=h){var o,n=this.w,h=this.h,l=(this.pageWidth,this.pageHeight,this.bw),r=this.bh;o=r/l<h/n?r/l*i*n/this.options.pageTextureSize:i*h/this.options.pageTextureSize;for(var a=0;a<3;a++)this.slides[a].iscroll&&this.slides[a].iscroll.zoom(o,t,s,e);this.onZoom(i),this.loadVisiblePages()}}},zoomOut:function(i){this.zoomTo(i)},onZoom:function(i){"toolSelect"==this.options.main.tool?(this.disableFlip(),this.disablePan()):1<i?(this.disableFlip(),this.enablePan()):this.enableFlip(),this.options.main.onZoom(i)},rotateLeft:function(){this.rotation=(this.rotation+360-90)%360;for(var i=0;i<this.pagesArr.length;i++){this.pagesArr[i].setRotation(this.rotation)}this.resizeInnerSlides(),this.onResize(),console.log(this.rotation)},rotateRight:function(){this.rotation=(this.rotation+360+90)%360;for(var i=0;i<this.pagesArr.length;i++){this.pagesArr[i].setRotation(this.rotation)}this.resizeInnerSlides(),this.onResize(),console.log(this.rotation)},enableAutoplay:function(i){},updateCurrentPage:function(i){},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},onSwipe:function(i,e,t,s,o,n,h){},onPageLoaded:function(i,e){var t=this.options.rightToLeft?this.options.numPages-i-1:i;this.pagesArr[t].onPageLoaded(e,this.options.pages[i].canvas[e],this.options.pages[i].htmlContent),this.updateTool()},onPageUnloaded:function(i,e){var t=this.options.rightToLeft?this.options.numPages-i-1:i;this.pagesArr[t].unload()},disableFlip:function(){this.flipEnabled=!1,this.iscroll.disable()},enableFlip:function(){1!=this.options.numPages?(this.flipEnabled=!0,this.iscroll.enable()):this.disableFlip()},enablePan:function(){this.slides[0].iscroll&&this.slides[0].iscroll.enable(),this.slides[1].iscroll&&this.slides[1].iscroll.enable(),this.slides[2].iscroll&&this.slides[2].iscroll.enable()},disablePan:function(){this.slides[0].iscroll&&this.slides[0].iscroll.disable(),this.slides[1].iscroll&&this.slides[1].iscroll.disable(),this.slides[2].iscroll&&this.slides[2].iscroll.disable()}},FLIPBOOK.PageSwipe=function(i,e,t,s,o){this.rotation=0,this.index=t,this.options=e,this.texture=s,this.html=o,this.index=t,this.$wrapper=jQuery("<div>").addClass("flipbook-carousel-page"),this.wrapper=this.$wrapper[0],this.model=i,this.$inner=jQuery("<div>").appendTo(this.$wrapper).addClass("flipbook-carousel-page-inner"),this.$img=jQuery("<img>"),e.pagePreloader?this.$preloader=jQuery('<img src="'+e.pagePreloader+'" class="flipbook-page-preloader-image">').appendTo(this.$inner):this.$preloader=jQuery('<img src="'+e.assets.spinner+'" class="flipbook-page-preloader">').appendTo(this.$inner),this.setSize(this.pw,this.ph)},FLIPBOOK.PageSwipe.prototype={load:function(s){var i=this.options.rightToLeft?this.options.numPages-this.index-1:this.index;if(this.options.pdfMode){var e=this.model;if(!e.wrapperH)return;if(!e.zoom)return;var t=this.options,o=e.wrapperH*e.zoom<t.pageTextureSizeTreshold?t.pageTextureSizeSmall:t.pageTextureSize;if(this.size==o)return void(s&&s.call(this));this.size=o,this.options.main.loadPage(i,this.size,s)}else{var n=this;if(this.loaded)return void(s&&s.call(this));this.loaded=!0,this.options.main.loadPage(i,this.options.pageTextureSize,function(i){var e=document.createElement("img");e.src=i.image.src,n.$img=jQuery(e).addClass("page-carousel-img");i.image.naturalHeight;var t=i.image.naturalHeight;n.options.pageWidth,n.options.pageHeight;n.$img.appendTo(n.$inner),n.options.doublePage&&0<n.index&&n.index%2==0&&n.$img.css("left","-100%"),n.options.doublePage?0==n.index||n.index==n.options.pages.length-1&&!n.options.oddPages?n.$img.css("width","100%"):n.$img.css("width","200%"):n.$img.css("width","100%"),i.htmlContent&&(n.htmlContent=i.htmlContent[0],i.htmlContent.appendTo(n.$inner),n.updateHtmlContentSize()),n.setRotation(),s&&s.call(n)})}},unload:function(){this.loaded=!1,this.pageSize=0,this.size=0,this.$preloader.appendTo(this.$inner)},onPageLoaded:function(i,e,t){this.pageSize!=i&&(this.pageSize=i,this.$inner.empty(),jQuery(e).appendTo(this.$inner),jQuery(t).appendTo(this.$inner),this.htmlContent=t,this.updateHtmlContentSize())},dispose:function(){this.pageSize&&(this.pageSize=null,this.$inner.empty())},setSize:function(){var i,e=this.options.pageTextureSize;0==this.rotation||180==this.rotation?i=e*this.options.pageWidth/this.options.pageHeight:(this.$wrapper.width(e).height(i),i=e*this.options.pageHeight/this.options.pageWidth),this.pw=i,this.ph=e,this.$wrapper.width(i).height(e),this.updateHtmlContentSize()},setRotation:function(i){void 0!==i&&(this.rotation=i),this.setSize(),this.$img.css("transform","rotate("+this.rotation+"deg) translateZ(0)"),90==this.rotation||270==this.rotation?this.$img.width(this.$wrapper.height()).height(this.$wrapper.width()):this.$img.width(this.$wrapper.width()).height(this.$wrapper.height())},updateHtmlContentSize:function(){var i=this.ph/1e3;this.htmlContent&&this.htmlContent.style&&(this.htmlContent.style.transform="scale("+i+") translateZ(0)",this.options.doublePage&&(this.index%2==0&&0<this.index?this.htmlContent.style.left="-100%":this.htmlContent.style.left="0"))}};